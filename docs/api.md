# Описание REST API

## User Service

Сервис для управления пользователями.

**Базовый URL:** `/users`

### Эндпоинты

* **`GET /users`**
    * Описание: Получить список всех пользователей.
    * Ответ: `200 OK` - Список пользователей `List<UserDto>`.
* **`GET /users/{id}`**
    * Описание: Получить пользователя по его уникальному идентификатору.
    * Параметры пути: `{id}` (UUID) - Идентификатор пользователя.
    * Ответ: `200 OK` - Данные пользователя `UserDto`. `404 Not Found` - Пользователь не найден.
* **`GET /users/username/{username}`**
    * Описание: Получить пользователя по его логину.
    * Параметры пути: `{username}` (String) - Логин пользователя.
    * Ответ: `200 OK` - Данные пользователя `UserDto`. `404 Not Found` - Пользователь не найден.
* **`PUT /users/{id}`**
    * Описание: Редактировать данные пользователя. Проверяется уникальность нового логина, если он отличается от
      старого.
    * Параметры пути: `{id}` (UUID) - Идентификатор пользователя для редактирования.
    * Тело запроса: `UpdateUserDto` (`username`, `lastName`, `firstName`).
    * Ответ: `200 OK` - Обновленные данные пользователя `UserDto`. `400 Bad Request` - Невалидные данные или
      неуникальный логин. `404 Not Found` - Пользователь не найден.

### Модели данных (DTO)

* **`UserDto`**: `{ "id": UUID, "username": String, "lastName": String, "firstName": String }`
* **`UpdateUserDto`**: `{ "username": String, "lastName": String, "firstName": String }`

---

## Task Service

Сервис для управления задачами.

**Базовый URL:** `/tasks`

### Эндпоинты

* **`GET /tasks`**
    * Описание: Получить список всех задач, где текущий пользователь является владельцем или исполнителем.
    * Ответ: `200 OK` - Список задач `List<TaskDto>`.
* **`GET /tasks/{id}`**
    * Описание: Получить задачу по ее уникальному идентификатору. Доступно только владельцу или исполнителю.
    * Параметры пути: `{id}` (UUID) - Идентификатор задачи.
    * Ответ: `200 OK` - Данные задачи `TaskDto`. `403 Forbidden` - Доступ запрещен. `404 Not Found` - Задача не найдена.
* **`GET /tasks/my`**
    * Описание: Получить список задач, где текущий пользователь является владельцем.
    * Ответ: `200 OK` - Список задач `List<TaskDto>`.
* **`GET /tasks/assigned`**
    * Описание: Получить список задач, где текущий пользователь является исполнителем.
    * Ответ: `200 OK` - Список задач `List<TaskDto>`.
* **`POST /tasks`**
    * Описание: Создать новую задачу. По умолчанию статус `NEW`.
    * Тело запроса: `CreateTaskDto` (`name`, `ownerId`, `executorId`). `ownerId` обычно берется из контекста
      аутентификации.
    * Ответ: `201 Created` - Созданная задача `TaskDto`. `400 Bad Request` - Невалидные данные.
* **`PUT /tasks/{id}`**
    * Описание: Редактировать задачу. Доступно только владельцу. Можно изменить `name`, `executorId`.
    * Параметры пути: `{id}` (UUID) - Идентификатор задачи.
    * Тело запроса: `UpdateTaskDto` (`name`, `executorId`).
    * Ответ: `200 OK` - Обновленная задача `TaskDto`. `400 Bad Request` - Невалидные данные. `403 Forbidden` - Доступ
      запрещен. `404 Not Found` - Задача не найдена.
* **`PATCH /tasks/{id}/status`**
    * Описание: Изменить статус задачи. Владелец может менять на любой статус. Исполнитель может менять `NEW` ->
      `IN_PROGRESS` и `IN_PROGRESS` -> `COMPLETED`.
    * Параметры пути: `{id}` (UUID) - Идентификатор задачи.
    * Тело запроса: `UpdateStatusDto` (`status`).
    * Ответ: `200 OK` - Обновленная задача `TaskDto`. `400 Bad Request` - Недопустимый переход статуса или невалидный
      статус. `403 Forbidden` - Доступ запрещен. `404 Not Found` - Задача не найдена.
* **`DELETE /tasks/{id}`**
    * Описание: Удалить задачу. Доступно только владельцу.
    * Параметры пути: `{id}` (UUID) - Идентификатор задачи.
    * Ответ: `204 No Content` - Успешное удаление. `403 Forbidden` - Доступ запрещен. `404 Not Found` - Задача не
      найдена.

### Модели данных (DTO)

* **`TaskDto`**:
  `{ "id": UUID, "name": String, "owner": UserInfoDto, "executor": UserInfoDto, "status": String, "createdAt": DateTime, "updatedAt": DateTime }`
* **`UserInfoDto`**: `{ "id": UUID, "displayName": String }` (агрегированная информация о пользователе)
* **`CreateTaskDto`**: `{ "name": String, "ownerId": UUID, "executorId": UUID }`
* **`UpdateTaskDto`**: `{ "name": String, "executorId": UUID }`
* **`UpdateStatusDto`**: `{ "status": String }` (Enum: `NEW`, `ASSIGNED`, `IN_PROGRESS`, `COMPLETED`)

*Примечание: Информация о пользователе (`owner`, `executor`) в `TaskDto` должна содержать агрегированные данные
пользователя, полученные асинхронно из `user-service`.* 