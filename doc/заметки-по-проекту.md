# Основные инструменты и технологии

- Spring Boot — для создания REST API в обоих сервисах.
- Spring Data JPA — работа с PostgreSQL.
- Liquibase/Flyway — управление миграциями БД.
- Apache Kafka — асинхронное взаимодействие между службами.
- Docker — контейнеризация сервисов, PostgreSQL и Kafka.
- Spring Security (опционально) — для авторизации/аутентификации (если требуется).
- Spring Web — реализация REST-контроллеров.
- Swagger (SpringDoc OpenAPI) — документация API.
- Модель данных с агрегацией — для объединения полей пользователя в task-service.
- Реализация CQRS/Event Sourcing (частично) — синхронизация данных между сервисами через Kafka.

## Ход реализации тестового задания

### 1. Сервис пользователей (user-service)

**Основные модули**
- Model – сущности для базы данных.
- Repository – слой для взаимодействия с базой данных.
- Service – бизнес-логика.
- Controller – REST API.
- DTO (Data Transfer Objects) – объекты для передачи данных.
- Exception – обработка ошибок.
- Config – настройки Spring и Kafka.

**Написать UserController с методами:**
- GET /api/users — получить всех.
- GET /api/users/{id} — получить по ID.
- GET /api/users/by-username/{username} — получить по логину.
- PUT /api/users/{id} — редактировать (с проверкой уникальности username).

### 2. Сервис задач (task-service)
**Основные модули**
- Model – сущности для базы данных.
- Repository – слой для взаимодействия с базой данных.
- Service – бизнес-логика.
- Controller – REST API.
- DTO (Data Transfer Objects) – объекты для передачи данных.
- Exception – обработка ошибок.
- Config – настройки Spring и Kafka.

**Реализовать TaskController с методами:**
- GET /api/tasks — только задачи, где пользователь владелец/исполнитель.
- POST /api/tasks — создать задачу (проверка существования ownerId и executorId через локальный кеш).
- PUT /api/tasks/{id}/status — изменить статус (с проверкой прав).

**Добавить бизнес-логику в TaskService:**
Валидация прав доступа (владелец может всё, исполнитель — только определённые статусы).
Автоматическое обновление updatedAt при изменениях.

### 3. Интеграция и инфраструктура
   **Настроить Docker Compose для развертывания:**

```
services:
  postgres:
    image: postgres
  kafka:
    image: confluentinc/cp-kafka
  user-service:
    build: ./user-service
  task-service:
    build: ./task-service
  ```
    
**Добавить Swagger в оба сервиса:**


### Ключевые моменты
**Независимость сервисов:**
- task-service хранит только ownerId и executorId, но агрегирует данные о пользователях через 
локальный кеш (синхронизируется через Kafka).

**Авторизация:**
- Для проверки прав доступа передавать userId в заголовках запроса (например, X-User-Id).

**Документация:**
- В README.md описать команды для запуска (docker-compose up), эндпоинты Swagger.



